{% if joueur == 1 %}
    <section class="main-joueur">
        <div class="echange" style="display: ;">
            <form onsubmit="submitFormJouer" id="action_form" class="form-joueur-actif" action="{{ path('action_handler', {'partie': partie.id, 'joueur': 'j1'}) }}" method="post">
                <input type="checkbox" class="empty">
            </form>
        </div>
        <div class="deck">
            {% for carte in plateau.mainJ1|sort %}
                <div data-tilt class="card card-deck" onclick="cardToChange(this.id)" id="{{ loop.index }}">
                    <img src="{{ asset('assets/images/cartes/objets/fond_'~cartes[carte-1].objectif~'.png') }}" alt="" class="fond">
                    <img src="{{ asset('assets/images/cartes/objets/objet_'~cartes[carte-1].objectif~'.png') }}" class="objet">
                    <input type="hidden" name="cartes[]" value="{{ cartes[carte-1].id }}">
                </div>
            {% endfor %}
        </div>
    </section>
</section>
{% elseif joueur == 2 %}
    <section class="main-joueur">
        <div class="echange" style="display: ;">
            <form id="action_form" class="form-joueur-actif" action="{{ path('action_handler', {'partie': partie.id, 'joueur': 'j2'}) }}" method="post">

            </form>
        </div>
        <div class="deck">
            {% for carte in plateau.mainJ2|sort %}
                <div data-tilt class="card card-deck" onclick="cardToChange(this.id)" id="{{ loop.index }}">
                    <img src="{{ asset('assets/images/cartes/objets/fond_'~cartes[carte-1].objectif~'.png') }}" alt="" class="fond">
                    <img src="{{ asset('assets/images/cartes/objets/objet_'~cartes[carte-1].objectif~'.png') }}" class="objet">
                    <input type="hidden" name="cartes[]" value="{{ cartes[carte-1].id }}">
                </div>
            {% endfor %}
        </div>
    </section>
</section>
{% endif %}
<script defer type="text/javascript">
    $(document).ready(function(){
        $(".card-deck").tilt({
            maxTilt: -8,
            scale: 1.07
        });
        $(".carte").tilt({
            maxTilt: -10,
        });
    });
</script>
<script>
    $(document).ready(function() {
        $('#action_form').on('submit', function(e) {
            e.preventDefault();
            if ($('.empty').length > 0) {
                return false;
            } else {
                console.log('action submited');
                $.ajax({
                    url: $(this).attr('action'),
                    type: 'POST',
                    data: $(this).serialize(),
                    success: function () {
                        $('.echange').hide();
                    }
                });
            }
        });
    });
</script>
